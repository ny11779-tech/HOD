<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>멍BTI</title>
  <style>
    body {
      font-family: '맑은 고딕', AppleSDGothicNeo, sans-serif;
      max-width: 900px;
      margin: 60px auto;
      padding: 40px;
      background: #fff8f0;
      color: #333;
      font-size: 24px;
    }
    h1, h2, h3 {
      text-align: center;
      color: #d96b3f;
      font-size: 30px;
    }
    .question {
      margin-bottom: 40px;
      padding: 25px;
      background: #fff0e5;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(217,107,63,0.3);
      font-size: 24px;
    }
    .question img {
      max-width: 180px;
      height: auto;
      display: block;
      margin: 10px auto 15px;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }
    .button-group {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
    }
    .button-group button {
      flex: 1;
      max-width: 48%;
    }
    .button-group button:nth-child(2) {
      text-align: right;
    }
    button {
      background-color: #d96b3f;
      color: white;
      border: none;
      padding: 16px 22px;
      font-size: 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover:not(:disabled) {
      background-color: #b0542e;
    }
    button:disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }
    #resultSection {
      display: none;
      margin-top: 50px;
      padding: 35px;
      background: #ffe6cc;
      border-radius: 15px;
      box-shadow: 0 3px 10px rgba(217,107,63고 애교부린다", "빠지거나 한동안 숨는다", "FT", "dog_images/뽀글머리 강아지.png"],
      ["8번 : 산책할 때 강아지의 리드줄 텐션은 어떤가요?", "끌고 다니거나 앞장서는 타입이다", "집사 곁을 조용히 걷는 타입이다", "PJ", "dog_images/강아지 산책 사진.png"]
    ];

    const scores = { EI: 0, NS: 0, FT: 0, PJ: 0 };
    const answered = Array(questions.length).fill(false);
    const container = document.getElementById("questionsContainer");

    questions.forEach((q, idx) => {
      const div = document.createElement("div");
      div.className = "question";

      const questionText = document.createElement("h3");
      questionText.textContent = q[0];
      div.appendChild(questionText);

      const img = document.createElement("img");
      img.src = q[4];
      img.alt = `질문 ${idx + 1} 이미지`;
      div.appendChild(img);

      const btnGroup = document.createElement("div");
      btnGroup.className = "button-group";

      const btn1 = document.createElement("button");
      btn1.textContent = "1. " + q[1];

      const btn2 = document.createElement("button");
      btn2.textContent = "2. " + q[2];

      btn1.onclick = () => {
        if (answered[idx]) return;
        scores[q[3]] += 1;
        answered[idx] = true;
        btn1.disabled = true;
        btn2.disabled = true;
        btn1.style.backgroundColor = "#a34b2c";
        btn2.style.backgroundColor = "#d96b3f";
      };

      btn2.onclick = () => {
        if (answered[idx]) return;
        scores[q[3]] -= 1;
        answered[idx] = true;
        btn1.disabled = true;
        btn2.disabled = true;
        btn2.style.backgroundColor = "#a34b2c";
        btn1.style.backgroundColor = "#d96b3f";
      };

      btnGroup.appendChild(btn1);
      btnGroup.appendChild(btn2);
      div.appendChild(btnGroup);
      container.appendChild(div);
    });

    document.getElementById("btnShowResult").onclick = () => {
      if (answered.includes(false)) {
        alert("모든 질문에 답변해주세요!");
        return;
      }

      let mbti = "";
      mbti += scores.EI >= 0 ? "E" : "I";
      mbti += scores.NS >= 0 ? "N" : "S";
      mbti += scores.FT >= 0 ? "F" : "T";
      mbti += scores.PJ >= 0 ? "P" : "J";

      document.getElementById("mbtiResult").textContent = `🐶 당신 강아지의 멍BTI는 ${mbti} 입니다!`;
      document.getElementById("mbtiDescription").textContent = mbti_descriptions[mbti] || "";
      const rec = product_recommendations[mbti] || {};
      document.getElementById("productImage").src = rec.image || "";
      document.getElementById("productDesc").textContent = rec.desc || "";

      document.getElementById("resultSection").style.display = "block";
      window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
    };
  </script>
</body>
</html>
